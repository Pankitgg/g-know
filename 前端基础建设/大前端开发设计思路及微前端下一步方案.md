## 大前端开发

目标：实现通过页面配置的方式，实现跨系统页面的复用，方便集成到一个系统中

1、在页面上新建菜单的方式来引入其他项目 。2、通过序列化的方式对简单页面导出渲染json

## 一、大前端开发计划

目前的低代码和大前端通常解决方案 基本上是为了实现

​	



### 计划：

1. **微前端框架升级** 

2. 可视化编辑、下载格式化文件

3. 组件编排渲染工具

   



## 二、微前端下一步计划

### 一、现状及问题

微前端是一种架构风格，其中众多独立交付的前端应用组合成一个大型整体。目前在框架里面使用飞冰微前端框架实现微前端功能。

现状：在项目中使用，但是项目分割、权限管理由业务决定

![img](https://static001.geekbang.org/infoq/61/617f580137cd8150abcaa1b7a4746e04.png)

问题：

1. 样式隔离：不同子应用之间的**css**可能会**相互污染**
2. 资源加载问题：切换子应用时会重新加载资源
3. 动态加载、独立部署未实践
4. 老系统使用微前端的改造较为复杂
5. 组件、资源共享

## 二、解决及下一步计划

对目前**微前端**方案进行**升级**，以支持以下功能

1. 增加iframe、js操作集、通信机制，用来嵌入无法使用微前端改造的项目

| 场景             | 方案             | 详细描述                                                     | 优劣                                        | 技术规划                                                     |
| ---------------- | ---------------- | ------------------------------------------------------------ | ------------------------------------------- | ------------------------------------------------------------ |
| 新项目           | 微前端           | 使用4.0框架提供的微前端模版创建。按照eslint规范书写代码，发布为微应用前进行工具检测 | 效果较好，但是只适用于4.0框架体系创建的项目 | 1. 脚手架wei-cli提供模版工程（复杂模版的话由专人构建）<br />2. 提供样式冲突检测工具。在eslint中限制全局样式。在脚手架中提供微应用代码检测工具 |
| vue、react老项目 | 微前端           | 使用微前端对其改造，需要修改原有系统代码                     | 效果好，但是改造难度和工作量较多            | 1. 需删除或隐藏老项目菜单<br />2. 子应用的微前端打包         |
| 更老的系统       | iframe+通信+html | 使用iframe嵌入无法改造系统，无需大量修改原有代码。只需要单点登录嵌入页面。 | 性能差但是，心智负担低                      | 1. 使用postmessage进行iframe通信<br />2. 提供通用的操作外部iframe对象，删除内部内容的操作<br />3. 单点登录 |





2. 增加默认的vite配置，将主应用的资源和需要暴露的资源放到vite的资源共享区。增加微应用之间的组件复用和资源共享

3. 增加更简单的使用和嵌入微前端的页面
4. 提供微前端应用规范